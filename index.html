<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Favicon: Blue diamond emoji as default. Replace href with your own .ico or .png if desired. -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%92%8E%3C/text%3E%3C/svg%3E">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lapis Lazuli</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
                                .day-nav-arrows {
                                  display: flex;
                                  align-items: center;
                                  justify-content: center;
                                  gap: 1.2em;
                                  margin: 0.5em 0 1em 0;
                                }
                                .arrow-btn {
                                  background: var(--accent);
                                  color: var(--primary);
                                  border: none;
                                  border-radius: 50%;
                                  width: 2.3em;
                                  height: 2.3em;
                                  font-size: 1.5em;
                                  display: flex;
                                  align-items: center;
                                  justify-content: center;
                                  cursor: pointer;
                                  box-shadow: 0 2px 8px rgba(255,209,102,0.08);
                                  transition: background 0.2s, color 0.2s, transform 0.15s;
                                }
                                .arrow-btn:disabled {
                                  opacity: 0.4;
                                  cursor: not-allowed;
                                }
                                .day-label {
                                  font-size: 1.1em;
                                  font-weight: bold;
                                  color: var(--primary);
                                  letter-spacing: 1px;
                                  background: var(--nav-bg);
                                  border-radius: 1em;
                                  padding: 0.3em 1.2em;
                                  box-shadow: 0 1px 4px rgba(91,127,255,0.07);
                                }
                                .unlock-timer {
                                  color: #e57373;
                                  font-size: 1em;
                                  margin-top: 1em;
                                  font-family: 'Quicksand', sans-serif;
                                  display: flex;
                                  align-items: center;
                                  gap: 0.4em;
                                  justify-content: center;
                                }
                            /* Animate mobile menu */
                            .nav-mobile-panel {
                              display: none;
                              flex-direction: column;
                              width: 100%;
                              background: var(--nav-bg);
                              border-radius: 0 0 1.5em 1.5em;
                              box-shadow: 0 8px 32px 0 rgba(91,127,255,0.10), 0 1.5px 8px 0 rgba(0,0,0,0.07);
                              margin-top: 0.5em;
                              padding-bottom: 0.5em;
                              animation: slideDown 0.3s cubic-bezier(.4,1.4,.6,1);
                            }
                            @keyframes slideDown {
                              from { opacity: 0; transform: translateY(-20px); }
                              to { opacity: 1; transform: translateY(0); }
                            }
                            @media (max-width: 700px) {
                              .nav-days, .theme-toggle {
                                display: none !important;
                              }
                              .navbar.expanded .nav-mobile-panel {
                                display: flex;
                              }
                              .navbar-hamburger {
                                display: block;
                              }
                            }
                        /* Hamburger and mobile navbar */
                        .navbar-hamburger {
                          display: none;
                          background: none;
                          border: none;
                          font-size: 2em;
                          color: var(--primary);
                          cursor: pointer;
                          margin-right: 0.5em;
                          z-index: 30;
                        }
                        @media (max-width: 700px) {
                          .navbar {
                            flex-direction: row;
                            width: 97vw;
                            max-width: 99vw;
                            padding: 0.5em 0.5em 0.2em 0.5em;
                          }
                          .navbar-hamburger {
                            display: block;
                          }
                          .nav-title {
                            font-size: 1.1em;
                          }
                          .nav-days, .theme-toggle {
                            display: none;
                          }
                          .navbar.expanded .nav-days,
                          .navbar.expanded .theme-toggle {
                            display: flex !important;
                          }
                          .navbar.expanded {
                            flex-wrap: wrap;
                            align-items: flex-start;
                            box-shadow: 0 16px 48px 0 rgba(91,127,255,0.18), 0 2px 12px 0 rgba(0,0,0,0.10);
                            background: var(--nav-bg);
                          }
                          .nav-days {
                            flex-direction: column;
                            width: 100%;
                            margin: 0.5em 0 0.5em 0;
                            gap: 0.3em;
                            align-items: flex-start;
                          }
                          .theme-toggle {
                            width: 100%;
                            margin: 0.5em 0 0.5em 0;
                            align-self: flex-start;
                          }
                        }
                    /* Theme toggle button */
                    .theme-toggle {
                      margin: 0.5em 0 0.2em 0;
                      background: var(--accent);
                      color: var(--primary);
                      border: none;
                      border-radius: 16px;
                      padding: 0.3em 1.2em;
                      font-size: 1em;
                      font-family: inherit;
                      cursor: pointer;
                      transition: background 0.2s, color 0.2s;
                      font-weight: bold;
                      box-shadow: 0 2px 8px rgba(255,209,102,0.08);
                    }
                    .theme-toggle:hover {
                      background: var(--primary);
                      color: #fff;
                    }
                    /* Dark theme variables */
                    body.dark {
                      --primary: #b5d1ff;
                      --secondary: #23263a;
                      --accent: #ffe066;
                      --bg: #181a26;
                      --text: #f7faff;
                      --nav-bg: #23263a;
                      --nav-active: #ffe066;
                      --card-bg: #23263a;
                      --shadow: 0 4px 24px rgba(181,209,255,0.18);
                    }
                    body.dark .nav-day.home {
                      background: #23263a;
                      color: #ffe066;
                      border: 1.5px solid #ffe066;
                      box-shadow: 0 2px 8px rgba(255,224,102,0.18);
                    }
                    body.dark .poem {
                      background: #23263a;
                      color: #b5d1ff;
                      border-left: 4px solid #ffe066;
                      box-shadow: 0 2px 12px rgba(181,209,255,0.13);
                    }
                    body.dark .pw-box {
                      background: #23263a;
                      color: #f7faff;
                      box-shadow: 0 4px 24px rgba(181,209,255,0.18);
                    }
                    body.dark .pw-input {
                      background: #181a26;
                      color: #ffe066;
                      border: 1.5px solid #ffe066;
                    }
                    body.dark .pw-btn {
                      background: #ffe066;
                      color: #23263a;
                      font-weight: bold;
                    }
                    body.dark .pw-btn:hover {
                      background: #b5d1ff;
                      color: #23263a;
                      background: #23263a;
                      color: #f7faff;
                      box-shadow: 0 4px 24px rgba(181,209,255,0.18);
                      background: #23263a;
                      color: #f7faff;
                      box-shadow: 0 2px 8px rgba(181,209,255,0.13);
                      color: #b5d1ff;
                      background: #23263a;
                      border: 1px solid #23263a;
                      background: #ffe066;
                      color: #23263a;
                      font-weight: bold;
                      background: #181a26;
                      color: #b5d1ff;
                    }
                .nav-day.home {
                  font-weight: bold;
                  color: var(--accent);
                  background: #fffbe6;
                  border: 1.5px solid var(--accent);
                  box-shadow: 0 2px 8px rgba(255,209,102,0.08);
                }
            .nav-day.locked {
              color: #b0b6c1;
              background: #e3eafe;
              cursor: not-allowed;
              opacity: 0.7;
              position: relative;
            }
            .nav-day .lock-icon {
              font-size: 1em;
              margin-left: 0.4em;
              vertical-align: middle;
              opacity: 0.8;
            }
        /* Password overlay styles */
        .pw-overlay {
          position: fixed;
          z-index: 10000;
          top: 0; left: 0; width: 100vw; height: 100vh;
          background: rgba(247,250,255,0.98);
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          transition: opacity 0.4s;
        }
        .pw-box {
          background: #fff;
          border-radius: 18px;
          box-shadow: 0 4px 24px rgba(91,127,255,0.13);
          padding: 2em 2em 1.5em 2em;
          text-align: center;
          min-width: 240px;
          max-width: 90vw;
        }
        .pw-box h2 {
          color: var(--primary);
          font-family: 'Montserrat', sans-serif;
          font-size: 1.3em;
          margin-bottom: 0.7em;
        }
        .pw-input {
          font-size: 1.1em;
          padding: 0.5em 1em;
          border-radius: 8px;
          border: 1.5px solid var(--primary);
          margin-bottom: 1em;
          outline: none;
          width: 80%;
          max-width: 220px;
          transition: border 0.2s;
        }
        .pw-input:focus {
          border: 1.5px solid var(--accent);
        }
        .pw-btn {
          background: var(--primary);
          color: #fff;
          border: none;
          border-radius: 8px;
          padding: 0.5em 1.5em;
          font-size: 1em;
          cursor: pointer;
          margin-top: 0.5em;
          transition: background 0.2s;
        }
        .pw-btn:hover {
          background: var(--accent);
          color: var(--primary);
        }
        .pw-error {
          color: #e57373;
          font-size: 1.1em;
          margin-top: 1em;
          font-family: 'Quicksand', sans-serif;
          display: flex;
          align-items: center;
          gap: 0.4em;
          justify-content: center;
        }
    :root {
      --primary: #5b7fff;
      --secondary: #ffe6fa;
      --accent: #ffd166;
      --bg: #f7faff;
      --text: #2d3142;
      --nav-bg: #e3eafe;
      --nav-active: #ffd166;
      --card-bg: #fff;
      --shadow: 0 4px 24px rgba(91,127,255,0.08);
    }
    html, body {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Quicksand', 'Montserrat', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      width: 100vw;
      overflow-x: hidden;
    }
    .navbar {
      background: var(--nav-bg);
      box-shadow: var(--shadow);
       display: flex;
       flex-direction: row;
       align-items: center;
       justify-content: space-between;
       width: 85vw;
       max-width: 80vw;
       margin: 1.2em auto 0 auto;
       padding: 0.5em 1.2em 0.2em 1.2em;
       border-radius: 1.5em;
       box-shadow: 0 8px 32px 0 rgba(91,127,255,0.10), 0 1.5px 8px 0 rgba(0,0,0,0.07);
       background: var(--nav-bg);
       position: sticky;
       top: 0.7em;
       z-index: 20;
       transition: box-shadow 0.3s, background 0.3s;
    }
      box-shadow: 0 16px 48px 0 rgba(91,127,255,0.18), 0 2px 12px 0 rgba(0,0,0,0.10);
      background: var(--nav-bg);
    .nav-title {
      font-family: 'Montserrat', sans-serif;
      font-size: 2em;
      font-weight: 700;
      color: var(--primary);
      letter-spacing: 2px;
      margin-bottom: 0.2em;
    }
    .nav-days {
      display: flex;
      gap: 0.5em;
      margin-bottom: 0.5em;
      flex-wrap: wrap;
      justify-content: center;
    }
    .nav-day {
      background: transparent;
      border: none;
      color: var(--primary);
      font-size: 1em;
      padding: 0.4em 1em;
      border-radius: 20px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      font-family: inherit;
    }
    .nav-day.selected, .nav-day:focus {
      background: var(--nav-active);
      color: #7c4dff;
      font-weight: bold;
      outline: none;
    }
    .container {
      max-width: 85vw;
      margin: 1.5em auto 1em auto;
      background: var(--card-bg);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 1.5em 1.2em 2em 1.2em;
      position: relative;
      z-index: 2;
      text-align: center;
    }
    .day-content {
      min-height: 180px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1em;
      animation: fadeIn 0.7s cubic-bezier(.4,1.4,.6,1);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .poem {
      font-style: italic;
      color: #7c4dff;
      background: #f3f0ff;
      border-left: 4px solid var(--primary);
      border-radius: 8px;
      padding: 1em 1em 1em 1.2em;
      margin: 0.5em 0;
      font-size: 1.1em;
      line-height: 1.7;
      box-shadow: 0 2px 8px rgba(91,127,255,0.06);
    }
    .cute-emoji {
      font-size: 2.2em;
      margin-bottom: 0.2em;
      animation: pop 1.2s infinite alternate cubic-bezier(.4,1.4,.6,1);
    }
    @keyframes pop {
      from { transform: scale(1); }
      to { transform: scale(1.13) rotate(-4deg); }
    }
    .footer {
      text-align: center;
      color: #b0b6c1;
      font-size: 0.95em;
      margin: 2em 0 1em 0;
    }
    @media (max-width: 600px) {
      .container { padding: 1em 0.5em 1.5em 0.5em; }
      .nav-title { font-size: 1.3em; }
    }
  </style>
</head>
<body>
    <div class="pw-overlay" id="pwOverlay">
      <div class="pw-box">
        <h2>Welcome!<br>Enter the secret password</h2>
        <input type="password" class="pw-input" id="pwInput" placeholder="Password..." autocomplete="off" />
        <br>
        <button class="pw-btn" id="pwBtn">Enter</button>
        <div class="pw-error" id="pwError" style="display:none;"></div>
      </div>
    </div>
  <nav class="navbar">
    <button class="navbar-hamburger" id="navbarHamburger" aria-label="Open menu">â˜°</button>
    <div class="nav-title">Lapis Lazuli</div>
    <button class="home-btn" id="homeBtn" type="button">Home</button>
    <style>  
        </style>  
    <button class="theme-toggle" id="themeToggle" type="button">Switch Theme</button>
    <style>
          .home-btn {
            margin: 0 0.7em;
            background: var(--accent);
            color: var(--primary);
            border: none;
            border-radius: 16px;
            padding: 0.3em 1.2em;
            font-size: 1em;
            font-family: inherit;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(255,209,102,0.08);
          }
          .home-btn.selected, .home-btn:focus {
            background: var(--primary);
            color: #fff;
            outline: none;
          }
          </style>
  </nav>
  <main class="container">
    <div class="day-content" id="dayContent"></div>
  </main>
  <div class="footer">Â© 2026 lapis lazuli â€” for you, always</div>
  <script>
    // --- Home button logic ---
    const homeBtn = document.getElementById('homeBtn');
    function setHomeBtnState(selected) {
      if (selected) {
        homeBtn.classList.add('selected');
      } else {
        homeBtn.classList.remove('selected');
      }
    }
    if (homeBtn) {
      homeBtn.onclick = () => {
        showHome();
        setHomeBtnState(true);
      };
    }
                // --- Hamburger/collapse logic ---
    const navbar = document.querySelector('.navbar');
    const hamburger = document.getElementById('navbarHamburger');
    const navMobilePanel = document.getElementById('navMobilePanel');
    function closeNavbarOnClickOutside(e) {
      if (window.innerWidth > 700) return;
      if (!navbar.contains(e.target) && navbar.classList.contains('expanded')) {
        navbar.classList.remove('expanded');
      }
    }
    if (hamburger) {
      hamburger.addEventListener('click', () => {
        navbar.classList.toggle('expanded');
        if (navbar.classList.contains('expanded') && navMobilePanel) {
          const navDays = navMobilePanel.querySelector('.nav-days');
          if (navDays) navDays.focus();
        }
      });
    }
    if (navMobilePanel) {
      navMobilePanel.addEventListener('click', (e) => {
        if (e.target.classList.contains('nav-day')) {
          setTimeout(() => navbar.classList.remove('expanded'), 200);
        }
      });
    }
    document.addEventListener('click', closeNavbarOnClickOutside);
    window.addEventListener('resize', () => {
      if (window.innerWidth > 700) navbar.classList.remove('expanded');
    });
            // --- Theme toggle logic ---
            const themeToggle = document.getElementById('themeToggle');
            function setTheme(dark) {
              if (dark) {
                document.body.classList.add('dark');
                themeToggle.innerHTML = 'Switch Theme';
              } else {
                document.body.classList.remove('dark');
                themeToggle.innerHTML = 'Switch Theme';
              }
              localStorage.setItem('lapis-theme', dark ? 'dark' : 'light');
            }
            themeToggle.onclick = () => setTheme(!document.body.classList.contains('dark'));
            // On load, set theme from localStorage or system preference
            window.addEventListener('DOMContentLoaded', () => {
              const saved = localStorage.getItem('lapis-theme');
              if (saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                setTheme(true);
              } else {
                setTheme(false);
              }
            });
        // --- Password overlay logic ---
        const pwOverlay = document.getElementById('pwOverlay');
        const pwInput = document.getElementById('pwInput');
        const pwBtn = document.getElementById('pwBtn');
        const pwError = document.getElementById('pwError');
        const SECRET = 'sakshimishra'; // You can change this password
        function showError() {
          pwError.innerHTML = "You are not Lapis Lazuli <span style='font-size:1.3em;'>ðŸ§¸</span>";
          pwError.style.display = '';
          pwInput.value = '';
          pwInput.focus();
        }
        function unlockSite() {
          pwOverlay.style.opacity = '0';
          setTimeout(() => {
            pwOverlay.style.display = 'none';
            document.body.style.overflow = '';
          }, 400);
        }
        function checkPw() {
          if (pwInput.value === SECRET) {
            unlockSite();
          } else {
            showError();
          }
        }
        pwBtn.onclick = checkPw;
        pwInput.addEventListener('keydown', e => { if (e.key === 'Enter') checkPw(); });
        window.addEventListener('DOMContentLoaded', () => {
          pwInput.focus();
          document.body.style.overflow = 'hidden';
        });
    // Day data: subtle, poetic, introvert-friendly, cozy, cute
    const dayData = {
      'Feb 08': {
        emoji: 'ðŸ«§',
        poem: `A gentle start, like morning dew,\nA week of blue, just me and you.`
      },
      'Feb 09': {
        emoji: 'ðŸ§¸',
        poem: `Soft words, a cozy nook,\nQuiet laughter, a knowing look.`
      },
      'Feb 10': {
        emoji: 'ðŸŒ™',
        poem: `Moonlit thoughts, a silent tune,\nComfort found beneath the moon.`
      },
      'Feb 11': {
        emoji: 'ðŸŒ±',
        poem: `New leaves, a hopeful green,\nSmall joys in spaces in-between.`
      },
      'Feb 12': {
        emoji: 'ðŸ¦‹',
        poem: `Fluttering hearts, a gentle breeze,\nMagic in the simplest ease.`
      },
      'Feb 13': {
        emoji: 'â˜•',
        poem: `Warm mugs, a quiet day,\nWords unspoken, hearts that stay.`
      },
      'Feb 14': {
        emoji: 'ðŸ’™',
        poem: `Blue as lapis, deep and true,\nA secret world, just us two.`
      }
    };
    const days = Object.keys(dayData);
    const dayContent = document.getElementById('dayContent');
    let currentDayIdx = 0;
    const today = new Date(2026, 1, 3); // Feb 03, 2026
    function parseDay(dayStr) {
      const [mon, d] = dayStr.split(' ');
      const month = {Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[mon];
      return new Date(2026, month, parseInt(d));
    }
    function showDay(idx) {
      if (idx < 0 || idx >= days.length) return;
      currentDayIdx = idx;
      setHomeBtnState(false);
      const day = days[idx];
      const dayDate = parseDay(day);
      const locked = dayDate > today;
      let html = `<div class="day-nav-arrows">`;
      html += `<button class="arrow-btn" id="leftArrow" ${idx===0?'disabled':''} aria-label="Previous">&#8592;</button>`;
      html += `<span class="day-label">${day}</span>`;
      html += `<button class="arrow-btn" id="rightArrow" ${idx===days.length-1?'disabled':''} aria-label="Next">&#8594;</button>`;
      html += `</div>`;
      if (locked) {
        html += `<div class="unlock-timer" id="unlockTimer">ðŸ”’ Unlocks in ...</div>`;
        dayContent.innerHTML = html;
        document.getElementById('unlockTimer').textContent = `ðŸ”’ This page will unlock at the right time.`;
      } else {
        const {emoji, poem} = dayData[day];
        html += `<div class="cute-emoji">${emoji}</div><div class="poem">${poem.replace(/\n/g, '<br>')}</div>`;
        dayContent.innerHTML = html;
      }
      document.getElementById('leftArrow').onclick = ()=>showDay(currentDayIdx-1);
      document.getElementById('rightArrow').onclick = ()=>showDay(currentDayIdx+1);
    }
    // Home tab logic
    function showHome() {
      dayContent.innerHTML = `
        <div class="cute-emoji">ðŸ’Ž</div>
        <div class="poem" style="color:#5b7fff; background:#f7faff; border-left:4px solid #ffd166;">Welcome to <b>Lapis Lazuli</b>!<br><span style='color:#7c4dff;'>A cozy, secret space for you.<br>Each day, a new page will unlock.<br>Come back soon!</span></div>
        <div class="day-nav-arrows"><button class="arrow-btn" id="rightArrow" aria-label="Next">&#8594;</button></div>
      `;
      setHomeBtnState(true);
      document.getElementById('rightArrow').onclick = ()=>showDay(0);
    }
    // Initial load
    let onHome = true;
    showHome();
    // --- Playful floating particles (bubbles, hearts, stars) ---
    (function() {
      const canvas = document.createElement('canvas');
      canvas.id = 'particleCanvas';
      canvas.style.position = 'fixed';
      canvas.style.top = '0';
      canvas.style.left = '0';
      canvas.style.width = '100vw';
      canvas.style.height = '100vh';
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = '0';
      document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d');
      let dpr = window.devicePixelRatio || 1;
      let w = window.innerWidth, h = window.innerHeight;
      function resize() {
        w = window.innerWidth; h = window.innerHeight;
        canvas.width = w * dpr;
        canvas.height = h * dpr;
        canvas.style.width = w + 'px';
        canvas.style.height = h + 'px';
        ctx.setTransform(1,0,0,1,0,0);
        ctx.scale(dpr, dpr);
      }
      window.addEventListener('resize', resize);
      resize();
      // Particle shapes: bubbles, hearts, stars
      const shapes = [
        { draw: (x, y, r) => { ctx.globalAlpha = 0.18; ctx.beginPath(); ctx.arc(x, y, r, 0, 2*Math.PI); ctx.fillStyle = '#5b7fff'; ctx.fill(); ctx.globalAlpha = 1; } },
        { draw: (x, y, r) => { ctx.save(); ctx.translate(x, y); ctx.rotate(-Math.PI/4); ctx.scale(r/12, r/12); ctx.beginPath(); ctx.moveTo(0,0); ctx.bezierCurveTo(0,-6,6,-12,12,0); ctx.bezierCurveTo(18,12,0,18,0,30); ctx.bezierCurveTo(0,18,-18,12,-12,0); ctx.bezierCurveTo(-6,-12,0,-6,0,0); ctx.closePath(); ctx.fillStyle = '#ffd166'; ctx.globalAlpha = 0.22; ctx.fill(); ctx.globalAlpha = 1; ctx.restore(); } },
        { draw: (x, y, r) => { ctx.save(); ctx.translate(x, y); ctx.rotate(Math.PI/5); ctx.beginPath(); for(let i=0;i<5;i++){ctx.lineTo(Math.cos((18+i*72)/180*Math.PI)*r, -Math.sin((18+i*72)/180*Math.PI)*r);ctx.lineTo(Math.cos((54+i*72)/180*Math.PI)*r*0.5, -Math.sin((54+i*72)/180*Math.PI)*r*0.5);} ctx.closePath(); ctx.fillStyle = '#7c4dff'; ctx.globalAlpha = 0.16; ctx.fill(); ctx.globalAlpha = 1; ctx.restore(); } }
      ];
      const particles = [];
      function spawn() {
        if (particles.length < 22) {
          const s = shapes[Math.floor(Math.random()*shapes.length)];
          particles.push({
            x: Math.random()*w,
            y: h+30,
            r: 12+Math.random()*18,
            vy: -0.3-Math.random()*0.7,
            vx: (Math.random()-0.5)*0.3,
            shape: s,
            alpha: 0.7+Math.random()*0.3
          });
        }
      }
      function draw() {
        ctx.clearRect(0,0,w,h);
        for (let p of particles) {
          ctx.save();
          ctx.globalAlpha = p.alpha;
          p.shape.draw(p.x, p.y, p.r);
          ctx.restore();
          p.x += p.vx;
          p.y += p.vy;
          p.alpha -= 0.0007;
        }
        for (let i=particles.length-1; i>=0; i--) {
          if (particles[i].y < -40 || particles[i].alpha < 0.05) particles.splice(i,1);
        }
        spawn();
        requestAnimationFrame(draw);
      }
      draw();
    })();
  </script>
</body>
</html>
